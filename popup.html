<!DOCTYPE html>
<html>
<head>
    <title>SecureX Options</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <h2>âš  SecureX Threat Options</h2>

    <p id="msgBox"></p>

    <button id="reportBtn">Generate Cyber Report</button>
    <button id="blockBtn">Block Sender & Delete Messages</button>
    
    <script src="libs/jspdf.umd.min.js"></script>
    <script>
        // Extract message from URL
        const params = new URLSearchParams(location.search);
        const msg = params.get("msg");

        document.getElementById("msgBox").innerText = msg;

        // REPORT BUTTON
        document.getElementById("reportBtn").onclick = () => {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();

            doc.setFontSize(20);
            doc.text("SecureX Cyber Threat Report", 20, 20);

            doc.setFontSize(12);
            doc.text("Generated by SecureX Extension", 20, 30);
            doc.text("Date: " + new Date().toLocaleString(), 20, 40);

            doc.text("Threat Message:", 20, 70);
            doc.text(doc.splitTextToSize(msg, 160), 20, 80);

            doc.text("Severity: HIGH", 20, 140);

            doc.save("SecureX_Report.pdf");
            alert("PDF Report Generated!");
        };

        // BLOCK OPTION
        document.getElementById("blockBtn").onclick = () => {
            alert("Sender blocked & chat cleared (to be implemented)");
        };
    </script>
</body>
</html>
